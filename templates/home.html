{% extends 'base.html' %}
{% load static %}
{% block title %}home page {% endblock title %}

{% block body %} 
<!-- feature post section for first uploaded featured post  -->
{% for post in featured_posts %}
    {% if forloop.first %}
    <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="background-image: url({{post.featured_image.url}});background-blend-mode: overlay;background-size:cover;">
        <div class="col-md-8 px-0">
            <h1 class="display-4 font-italic">{{post.title}}</h1>
            <p class="lead my-3">{{post.short_description |truncatewords:20}}</p>
            <p class="lead mb-0"><a href="{% url 'blog' post.slug %}" class="text-white font-weight-bold">Continue reading...</a></p>
        </div>
    </div>
    {% endif %}
{% endfor %}
<!-- featured post section for other featured posts  -->
<h3 class="text-uppercase text-danger mb-4" style="letter-spacing:2px">Featured posts</h3>
<div class="row">
    {% for post in featured_posts %}
        {% if not forloop.first %}
        <div class="col-md-6 mb-4">
            <div class="card border shadow-sm h-100">
                <div class="card-body d-flex flex-column">
                    <h3>
                        <a href="{% url 'blog' post.slug %}" class="text-dark text-decoration-none font-weight-bold">
                            {{post.title}}
                        </a>
                    </h3>
                    <div class="mb-2">
                        <small class="text-muted">{{post.created_at|timesince}} ago | {{post.author}}</small>
                    </div>
                    <p class="card-text text-secondary">
                        {{post.short_description|truncatewords:20}}
                    </p>
                    <a href="{% url 'blog' post.slug %}" class="mt-auto text-danger font-weight-bold text-decoration-none">
                        View Feature →
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    {% endfor %}
</div>
<!-- recent posts section with pagination means post which are not featured  -->
<h3 id="recent-posts" class="text-uppercase text-danger mb-4" style="letter-spacing:2px">Recent posts</h3>
<main role="main" class="container p-0">
    <div class="row">
        {% for post in posts %}
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm border">
                <div class="card-body d-flex flex-column">
                    <h3>
                        <a href="{% url 'blog' post.slug %}" class="text-dark text-decoration-none">{{post.title}}</a>
                    </h3>
                    <small class="mb-2 text-muted">
                        {{post.created_at|timesince}} ago | {{post.author}}
                    </small>
                    <p class="card-text text-secondary">
                        {{post.short_description|truncatewords:15}}
                    </p>
                    <a href="{% url 'blog' post.slug %}" class="mt-auto text-primary font-weight-bold">Read More →</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</main>
<!-- pagination for recent posts  -->
{% include '_pagination.html' %}
{% endblock body %}